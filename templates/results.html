{% extends "base.html" %}

{% block content %}
<h2>Search Results</h2>
<p>Showing results for: <strong>{{ query }}</strong> {% if category %}in <strong>{{ category }}</strong>{% endif %}</p>

{% if results %}
    <div class="results-container">
        {% for listing in results %}
            <div class="listing-card">
                <img src="{{ url_for('static', filename='uploads/' + listing.images.split(',')[0].strip()) }}" 
                     alt="Listing Image" class="listing-image">
                <p class="title">{{ listing.title }}</p>
                <p class="price">KES {{ "{:,.0f}".format(listing.price) }}</p>
                <p class="condition">Condition: {{ listing.condition }}</p>
                <a href="{{ url_for('views.listing_detail', listing_id=listing.id) }}" class="btn btn-primary">View Details</a>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>No results found. Try refining your search.</p>
{% endif %}
{% endblock %}
